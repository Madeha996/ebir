(this["webpackJsonplightence-admin"]=this["webpackJsonplightence-admin"]||[]).push([[23],{406:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i(0);var s=i(53),n=i(413),a=i(213),l=i(214),c=i(215),r=i(3);const o=e=>{let{form:t,isFieldsChanged:i,setFieldsChanged:a,footer:l,loading:c=!1,children:o,...d}=e;const[j]=s.a.useForm(),b=t||j;return Object(r.jsxs)(s.a,{form:b,...d,children:[o,i&&(l||Object(r.jsx)(n.a,{loading:c,onCancel:()=>{null===b||void 0===b||b.resetFields(),a&&a(!1)}}))]})};o.Title=a.a,o.Item=l.a,o.List=c.a,o.useForm=s.a.useForm,o.Provider=s.a.Provider},413:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i(0);var s=i(382),n=i(383),a=i(54),l=i(376),c=i(3);const r=e=>{let{className:t,onCancel:i,loading:r,...o}=e;const{t:d}=Object(l.a)();return Object(c.jsxs)(s.a,{className:t,gutter:[10,10],wrap:!1,children:[Object(c.jsx)(n.a,{span:12,children:Object(c.jsx)(a.a,{block:!0,type:"ghost",onClick:i,...o,children:d("common.cancel")})}),Object(c.jsx)(n.a,{span:12,children:Object(c.jsx)(a.a,{block:!0,type:"primary",loading:r,htmlType:"submit",...o,children:d("common.save")})})]})}},577:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i(281),a=i(383),l=i(384),c=i(376),r=i(199),o=i(18),d=i(201),j=i.n(d);const b=async e=>await j.a.delete("https://eabir-backend.onrender.com/api/v1/files/".concat(e)),u=async(e,t,i)=>await j.a.put("https://eabir-backend.onrender.com/api/v1/files/".concat(e),{title:t});var h,m=i(53),p=i(382),O=i(377),g=i(386),x=i(406),y=i(54),v=i(582),f=i(238),F=i(8),C=i(9),w=i(573);const S=Object(C.c)(w.a)(h||(h=Object(F.a)([""])));var k=i(3);var I,V=e=>{let{allowedTypes:t,onChange:i,label:s,fileList:n}=e;const{t:a}=Object(c.a)();return Object(k.jsx)(x.a.Item,{name:"uploadImage",children:Object(k.jsx)(S,{multiple:!0,action:"http://localhost:3000/",listType:"picture",fileList:n,showUploadList:!1,onChange:i,children:Object(k.jsx)(f.a,{icon:Object(k.jsx)(v.a,{}),children:s})})})},L=i(237);const D=Object(C.c)(L.a)(I||(I=Object(F.a)([""]))),E=e=>Object(k.jsx)(D,{...e});var P=i(72),T=i(387),A=i(381),M=i(212),N=i(561),R=i(209),U=i(163);var z=e=>{let{title:t,filePath:i,description:l,id:o,onFinish:d,onDelete:j,uid:h,index:m,getChildData:O}=e;const{t:y}=Object(c.a)(),v="https://eabir-backend.onrender.com".concat(i),[f]=x.a.useForm(),[F,C]=Object(s.useState)(!!o),[w,S]=Object(s.useState)(!1),[I,V]=Object(s.useState)(""),[L,E]=Object(s.useState)(!1),[z,_]=Object(s.useState)(!1),Y=Object(r.useMutation)((e=>b(e))),J=Object(r.useMutation)((e=>{let{id:t,title:i,description:s}=e;return u(t,i)}),{onSuccess:()=>{S(!1),C(!0),n.b.success("Attachment edited successfully")},onError:e=>{console.error("Error editing attachment:",e),n.b.error("Error editing attachment")}});return Object(k.jsx)(D,{spinning:z,children:Object(k.jsxs)(x.a,{isFieldsChanged:w,form:f,initialValues:{title:t,description:l},onFieldsChange:()=>{f.validateFields().then((e=>{null===O||void 0===O||O(m,e)})).catch((e=>{console.error("Validation failed:",e)}))},footer:I?Object(k.jsxs)(p.a,{justify:"center",style:{width:"90%",margin:"auto"},children:[Object(k.jsx)(a.a,{span:12,children:Object(k.jsx)(P.a,{type:"default",style:{width:"98%",margin:"0.5rem"},onClick:()=>C(!0),children:y("common.cancel")})}),Object(k.jsx)(a.a,{span:12,children:Object(k.jsx)(P.a,{type:"primary",style:{width:"98%",margin:"0.5rem"},onClick:()=>{const{title:e,description:t}=f.getFieldsValue();I&&J.mutateAsync({id:I,title:e,description:t})},children:y("common.save")})})]}):Object(k.jsx)(k.Fragment,{}),children:[Object(k.jsxs)(g.a,{style:{width:"300px",margin:"auto 1rem",position:"relative",borderRadius:"10px"},bodyStyle:{padding:"0"},children:[Object(k.jsxs)(p.a,{justify:"end",style:{position:"absolute",top:"5px",right:"5px",zIndex:2},children:[o&&Object(k.jsx)(P.a,{icon:Object(k.jsx)(U.a,{color:"green"}),style:{margin:"0 0.2rem 0.5rem 0.2rem",border:"1px solid green",borderRadius:"50%",background:"transparent"},onClick:()=>(e=>{S(!0),V(e),C(!1)})(null!==o&&void 0!==o?o:"")}),Object(k.jsx)(P.a,{icon:Object(k.jsx)(N.a,{style:{color:"red"}}),style:{margin:"0 0.2rem 0.5rem 0.2rem",borderColor:"red",border:"1px solid red",borderRadius:"50%",background:"transparent"},onClick:()=>E(!0)})]}),Object(k.jsx)(T.a,{alt:"Image",src:o?v:i,preview:!1,style:{height:"240px",width:"297px",borderRadius:"10px 10px 0px 0px"}}),Object(k.jsxs)(p.a,{style:{padding:"0.4rem",width:"100%"},children:[Object(k.jsx)(x.a.Item,{name:"title",style:{width:"100%"},children:Object(k.jsx)(A.a,{disabled:F,placeholder:"Title"})}),Object(k.jsx)(x.a.Item,{name:"description",style:{width:"100%"},children:Object(k.jsx)(R.b,{disabled:F,placeholder:"Description"})})]})]}),Object(k.jsx)("div",{children:Object(k.jsx)(M.a,{title:y("common.DeleteModal"),centered:!0,visible:L,onOk:()=>{_(!0),o?Y.mutateAsync(o).then((()=>{n.b.success("Attachment deleted successfully")})).catch((e=>{n.b.error("Error deleting attachment: ".concat(e))})).finally((()=>_(!1))):null===j||void 0===j||j(h),E(!1)},onCancel:()=>E(!1),size:"small",children:Object(k.jsx)("p",{children:y("modals.deleteEnsureMessage")})})})]})})};const _={labelCol:{span:24},wrapperCol:{span:24}},Y=e=>{let{imagesList:t,newImagesList:i,handleUploadImages:n,handleDeleteImageCard:a,handeSubmissionImages:l,onFinish:r,setNewImagesList:o,loading:d}=e;const[j,b]=Object(s.useState)(!1),{t:u}=Object(c.a)(),[h]=m.a.useForm(),v=(e,t)=>{o((i=>{const s=[...i];return s[e]={...s[e],...t},s}))};return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(E,{spinning:d,children:Object(k.jsxs)(x.a,{form:h,..._,isFieldsChanged:j,onFieldsChange:()=>b(!0),name:"imagesForm",initialValues:{},footer:Object(k.jsx)(x.a.Item,{style:{marginTop:"0.5rem"},children:Object(k.jsx)(y.a,{type:"primary",htmlType:"submit",disabled:0===i.length,loading:d,children:u("common.submit")})}),onFinish:l,children:[Object(k.jsxs)(p.a,{align:"middle",justify:"space-between",children:[Object(k.jsx)(O.a.Title,{children:"Images"}),Object(k.jsx)(V,{label:"Click to upload Image",onChange:n,fileList:i})]}),i.length>0||t.length>0?Object(k.jsx)(g.a,{style:{background:"var(--shadow-color)",border:"none"},children:Object(k.jsxs)(p.a,{gutter:[10,20],children:[i.map(((e,t)=>Object(k.jsx)(z,{filePath:e.url,onDelete:a,uid:e.uid,index:t,getChildData:v},e.uid))),t.map((e=>Object(k.jsx)(z,{title:e.title,filePath:e.filePath,description:e.description,id:e._id},e._id)))]})}):Object(k.jsx)(p.a,{justify:"center",children:Object(k.jsx)(O.a.Paragraph,{children:"No Uploaded Images Yet"})})]})})})};var J=i(211),B=i(540);const Q=i.n(B).a;var q=e=>{let{title:t,filePath:i,description:l,id:o,cardLabel:d,onFinish:j,onDelete:h,uid:O,type:g,getChildData:y,index:v}=e;const{t:f}=Object(c.a)(),F="https://eabir-backend.onrender.com".concat(i),[C]=m.a.useForm(),[w,S]=Object(s.useState)(!!o),[I,V]=Object(s.useState)(!1),[L,E]=Object(s.useState)(""),[T,z]=Object(s.useState)(!1),[_,Y]=Object(s.useState)(!1),B=Object(r.useMutation)((e=>b(e))),q=Object(r.useMutation)((e=>{let{id:t,title:i,description:s}=e;return u(t,i)}),{onSuccess:()=>{V(!1),S(!0),n.b.success("Attachment edited successfully")},onError:e=>{console.error("Error editing attachment:",e),n.b.error("Error editing attachment")}});return Object(k.jsx)(D,{spinning:_,children:Object(k.jsxs)(x.a,{isFieldsChanged:I,form:C,onFinish:j,initialValues:{title:t,description:l},onFieldsChange:()=>{C.validateFields().then((e=>{null===y||void 0===y||y(v,e)})).catch((e=>{console.error("Validation failed:",e)}))},footer:L?Object(k.jsxs)(p.a,{justify:"center",style:{width:"90%",margin:"auto"},children:[Object(k.jsx)(a.a,{span:12,children:Object(k.jsx)(P.a,{type:"default",style:{width:"98%",margin:"0.5rem"},onClick:()=>S(!0),children:f("common.cancel")})}),Object(k.jsx)(a.a,{span:12,children:Object(k.jsx)(P.a,{type:"primary",style:{width:"98%",margin:"0.5rem"},onClick:()=>{const{title:e,description:t}=C.getFieldsValue();L&&q.mutateAsync({id:L,title:e,description:t})},children:f("common.save")})})]}):Object(k.jsx)(k.Fragment,{}),children:[Object(k.jsxs)(J.a,{style:{width:"300px",margin:"auto 1rem"},children:[Object(k.jsxs)(p.a,{justify:"end",style:{position:"absolute",top:"5px",right:"5px",zIndex:2},children:[o&&Object(k.jsx)(P.a,{icon:Object(k.jsx)(U.a,{color:"green"}),style:{margin:"0 0.2rem 0.5rem 0.2rem",border:"1px solid green",borderRadius:"50%",background:"transparent"},onClick:()=>(e=>{S(!1),V(!0),E(e)})(null!==o&&void 0!==o?o:"")}),Object(k.jsx)(P.a,{icon:Object(k.jsx)(N.a,{style:{color:"red"}}),style:{margin:"0 0.2rem 0.5rem 0.2rem",borderColor:"red",border:"1px solid red",borderRadius:"50%",background:"transparent"},onClick:()=>z(!0)})]}),Object(k.jsx)(Q,{url:o?F:i,controls:!0,width:"100%",style:{aspectRatio:"3/2",objectFit:"contain"}}),Object(k.jsx)(x.a.Item,{name:"title",initialValue:t,children:Object(k.jsx)(A.a,{disabled:w,placeholder:"Title"})}),Object(k.jsx)(x.a.Item,{name:"description",initialValue:l,children:Object(k.jsx)(R.b,{disabled:w,placeholder:"Description"})})]}),Object(k.jsx)("div",{children:Object(k.jsx)(M.a,{title:f("common.DeleteModal"),centered:!0,visible:T,onOk:()=>{Y(!0),o?B.mutateAsync(o).then((()=>{n.b.success("Attachment deleted successfully")})).catch((e=>{n.b.error("Error deleting attachment: ".concat(e))})).finally((()=>Y(!1))):null===h||void 0===h||h(O),z(!1)},onCancel:()=>z(!1),size:"small",children:Object(k.jsx)("p",{children:f("modals.deleteEnsureMessage")})})})]})})};const G={labelCol:{span:24},wrapperCol:{span:24}};var H=e=>{let{handeSubmissionVideos:t,handleUploadVideos:i,setNewVideosList:n,newVideosList:a,onFinish:l,handleDeleteVideoCard:r,videosList:o,loading:d}=e;const[j,b]=Object(s.useState)(!1),[u,h]=Object(s.useState)(!1),{t:v}=Object(c.a)(),[f]=m.a.useForm(),F=(e,t)=>{n((i=>{const s=[...i];return s[e]={...s[e],...t},s}))};return Object(k.jsx)(D,{spinning:d,children:Object(k.jsxs)(x.a,{form:f,...G,isFieldsChanged:j,onFieldsChange:()=>b(!0),name:"videosForm",initialValues:{},footer:Object(k.jsx)(x.a.Item,{style:{marginTop:"0.5rem"},children:Object(k.jsx)(y.a,{type:"primary",htmlType:"submit",loading:u,disabled:0===a.length,children:v("common.submit")})}),onFinish:t,children:[Object(k.jsxs)(p.a,{align:"middle",justify:"space-between",children:[Object(k.jsx)(O.a.Title,{children:"Videos"}),Object(k.jsx)(V,{label:"Click to upload Video",onChange:i,fileList:a})]}),a.length>0||o.length>0?Object(k.jsx)(g.a,{style:{background:"var(--shadow-color)"},children:Object(k.jsxs)(p.a,{gutter:[10,20],children:[(null===a||void 0===a?void 0:a.length)>0?null===a||void 0===a?void 0:a.map(((e,t)=>Object(k.jsx)(q,{filePath:null===e||void 0===e?void 0:e.url,onFinish:l,onDelete:r,uid:null===e||void 0===e?void 0:e.uid,index:t,getChildData:F}))):null,(null===o||void 0===o?void 0:o.length)>0?null===o||void 0===o?void 0:o.map((e=>Object(k.jsx)(q,{title:null===e||void 0===e?void 0:e.title,filePath:null===e||void 0===e?void 0:e.filePath,description:null===e||void 0===e?void 0:e.description,id:null===e||void 0===e?void 0:e._id}))):null]})}):Object(k.jsx)(p.a,{justify:"center",children:Object(k.jsx)(O.a.Paragraph,{children:"No Uploaded Videos Yet"})})]})})},K=i(236),W=i(36);var X=e=>{let{title:t,filePath:i,description:l,id:o,onFinish:d,onDelete:j,uid:h,type:O,getChildData:g,index:y}=e;const{t:v}=Object(c.a)(),f="https://eabir-backend.onrender.com".concat(i),[F]=m.a.useForm(),[C,w]=Object(s.useState)(!!o),[S,I]=Object(s.useState)(!1),[V,L]=Object(s.useState)(""),[D,E]=Object(s.useState)(!1),[z,_]=Object(s.useState)(!1),Y=Object(r.useMutation)((e=>b(e))),B=Object(r.useMutation)((e=>{let{id:t,title:i,description:s}=e;return u(t,i)}),{onSuccess:()=>{I(!1),w(!0),n.b.success("Attachment edited successfully")},onError:e=>{console.error("Error editing attachment:",e),n.b.error("Error editing attachment")}});return Object(k.jsxs)(x.a,{isFieldsChanged:S,form:F,initialValues:{title:t,description:l},onFieldsChange:()=>{F.validateFields().then((e=>{null===g||void 0===g||g(y,e)})).catch((e=>{console.error("Validation failed:",e)}))},style:{width:"98%"},footer:V?Object(k.jsxs)(p.a,{justify:"space-evenly",style:{width:"90%",margin:"auto"},children:[Object(k.jsx)(P.a,{type:"primary",style:{width:"50%",margin:"0.5rem"},onClick:()=>{const{title:e,description:t}=F.getFieldsValue();V&&B.mutateAsync({id:V,title:e,description:t})},children:v("common.save")}),Object(k.jsx)(P.a,{type:"default",style:{width:"50%",margin:"0.5rem"},onClick:()=>w(!0),children:v("common.cancel")})]}):Object(k.jsx)(k.Fragment,{}),children:[Object(k.jsx)(J.a,{style:{width:"100%",margin:"auto 1rem",display:"flex"},children:Object(k.jsxs)(p.a,{align:"top",justify:"space-between",children:[Object(k.jsx)(a.a,{span:4,children:Object(k.jsx)(W.b,{to:V?f:i,target:"_blank",children:Object(k.jsx)(T.a,{src:K.a,alt:"pdf-img",width:150,height:150,preview:!1})})}),Object(k.jsxs)(a.a,{span:16,children:[Object(k.jsx)(x.a.Item,{name:"title",initialValue:t,children:Object(k.jsx)(A.a,{placeholder:"Title",disabled:C})}),Object(k.jsx)(x.a.Item,{name:"description",initialValue:l,children:Object(k.jsx)(R.b,{placeholder:"Description",disabled:C})})]}),Object(k.jsxs)(a.a,{span:2,children:[o&&Object(k.jsx)(P.a,{icon:Object(k.jsx)(U.a,{color:"green"}),style:{margin:"0 0.2rem 0.5rem 0.2rem",border:"1px solid green",borderRadius:"50%",background:"transparent"},onClick:()=>(e=>{I(!0),L(e),w(!1)})(null!==o&&void 0!==o?o:"")}),Object(k.jsx)(P.a,{icon:Object(k.jsx)(N.a,{style:{color:"red"}}),style:{margin:"0 0.2rem 0.5rem 0.2rem",borderColor:"red",border:"1px solid red",borderRadius:"50%",background:"transparent"},onClick:()=>E(!0)})]})]})}),Object(k.jsx)("div",{children:Object(k.jsx)(M.a,{title:v("common.DeleteModal"),centered:!0,visible:D,onOk:()=>{_(!0),o?Y.mutateAsync(o).then((()=>{n.b.success("Attachment deleted successfully")})).catch((e=>{n.b.error("Error deleting attachment: ".concat(e))})).finally((()=>_(!1))):null===j||void 0===j||j(h),E(!1)},onCancel:()=>E(!1),size:"small",children:Object(k.jsx)("p",{children:v("modals.deleteEnsureMessage")})})})]})};const Z={labelCol:{span:24},wrapperCol:{span:24}};var $=e=>{let{handeSubmissionFiles:t,filesList:i,setNewFilesList:n,handleUploadFiles:a,newFilesList:l,onFinish:r,handleDeleteFileCard:o,loading:d}=e;const[j,b]=Object(s.useState)(!1),[u,h]=Object(s.useState)(!1),{t:v}=Object(c.a)(),[f]=m.a.useForm(),F=(e,t)=>{n((i=>{const s=[...i];return s[e]={...s[e],...t},s}))};return Object(k.jsx)(E,{spinning:d,children:Object(k.jsxs)(x.a,{form:f,...Z,isFieldsChanged:j,onFieldsChange:()=>b(!0),name:"fileForm",initialValues:{},footer:Object(k.jsx)(x.a.Item,{style:{marginTop:"0.5rem"},children:Object(k.jsx)(y.a,{type:"primary",htmlType:"submit",loading:u,disabled:0===l.length,children:v("common.submit")})}),onFinish:t,children:[Object(k.jsxs)(p.a,{align:"middle",justify:"space-between",children:[Object(k.jsx)(O.a.Title,{children:"Files"}),Object(k.jsx)(V,{label:"Click to upload Files",onChange:a,fileList:l})]}),l.length>0||i.length>0?Object(k.jsx)(g.a,{style:{background:"var(--shadow-color)",marginBottom:"1rem"},children:Object(k.jsxs)(p.a,{gutter:[10,20],children:[(null===l||void 0===l?void 0:l.length)>0?null===l||void 0===l?void 0:l.map(((e,t)=>Object(k.jsx)(X,{filePath:null===e||void 0===e?void 0:e.url,onFinish:r,onDelete:o,uid:null===e||void 0===e?void 0:e.uid,index:t,getChildData:F}))):null,(null===i||void 0===i?void 0:i.length)>0?null===i||void 0===i?void 0:i.map((e=>Object(k.jsx)(X,{title:null===e||void 0===e?void 0:e.title,filePath:null===e||void 0===e?void 0:e.filePath,description:null===e||void 0===e?void 0:e.description,id:null===e||void 0===e?void 0:e._id}))):null]})}):Object(k.jsx)(p.a,{justify:"center",children:Object(k.jsx)(O.a.Paragraph,{children:"No Uploaded Files Yet"})})]})})},ee=i(79);t.default=()=>{const{t:e}=Object(c.a)(),{pageId:t}=Object(o.s)(),[i]=m.a.useForm(),[d,b]=Object(s.useState)([]),[u,h]=Object(s.useState)([]),[p,O]=Object(s.useState)([]),[g,x]=Object(s.useState)([]),[y,v]=Object(s.useState)([]),[f,F]=Object(s.useState)([]),[C,w]=Object(s.useState)(!1),[S,I]=Object(s.useState)(!1),[V,L]=Object(s.useState)(!1),{data:D,refetch:E}=Object(r.useQuery)(["attachments",t],(()=>(async e=>await j.a.get("https://eabir-backend.onrender.com/api/v1/files/page/".concat(e)))(null!==t&&void 0!==t?t:"")),{onSuccess:e=>{var t;const i=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[],s=i.filter((e=>e.fileType.includes("image"))),n=i.filter((e=>e.fileType.includes("video"))),a=i.filter((e=>e.fileType.includes("application")));b(s),h(n),O(a)},onError:e=>{n.b.error(e.message||"Error fetching attachments")},onSettled:()=>w(!1)}),P=Object(r.useMutation)((e=>(async e=>await j.a.post("https://eabir-backend.onrender.com/api/v1/files",e))(e)),{onSuccess:()=>{n.b.success(e("Pagess.editPagesSuccessMessage")),E()},onError:e=>{n.b.error(e.message||"Error uploading file")}}),T=(e,t)=>i=>{const{fileList:s}=i;s.forEach(((i,s)=>{const n=new FileReader;n.onload=()=>{const a={...i,url:n.result};i.type.includes(e)&&t((e=>{const t=[...e];return t[s]=a,t}))},n.readAsDataURL(i.originFileObj)})),w(!1)},A=(e,i,s)=>()=>{if(e.length>0){s(!0);const a=e.map((e=>{const i=new FormData;return i.append("file",e.originFileObj),i.append("title",e.title||""),i.append("description",e.description||""),i.append("pageId",null!==t&&void 0!==t?t:""),P.mutateAsync(i)}));Promise.all(a).then((()=>{n.b.success("All files uploaded successfully")})).catch((e=>{n.b.error(e.message||"Error uploading files")})).finally((()=>{s(!1),i([])}))}},M=(e,t)=>{L(!0),setTimeout((()=>{("image"===e?x:"video"===e?v:F)((e=>e.filter((e=>e.uid!==t)))),L(!1)}),1e3)};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ee.a,{children:e("common.pageManagment")}),Object(k.jsxs)(a.a,{span:23,style:{margin:"1rem auto"},children:[Object(k.jsx)(Y,{handeSubmissionImages:A(g,x,w),handleDeleteImageCard:e=>M("image",e),handleUploadImages:T("image",x),imagesList:d,newImagesList:g,onFinish:A(g,x,w),loading:C,setNewImagesList:x}),Object(k.jsx)(l.a,{}),Object(k.jsx)(H,{handeSubmissionVideos:A(y,v,w),handleDeleteVideoCard:e=>M("video",e),handleUploadVideos:T("video",v),newVideosList:y,videosList:u,loading:C,setNewVideosList:v,onFinish:A(y,v,w)}),Object(k.jsx)(l.a,{}),Object(k.jsx)($,{filesList:p,newFilesList:f,setNewFilesList:F,handeSubmissionFiles:A(f,F,w),handleDeleteFileCard:e=>M("application",e),handleUploadFiles:T("application",F),onFinish:A(f,F,w),loading:C})]})]})}}}]);
//# sourceMappingURL=23.2c8118a2.chunk.js.map