(this["webpackJsonplightence-admin"]=this["webpackJsonplightence-admin"]||[]).push([[21],{406:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));t(0);var s=t(53),i=t(413),r=t(213),a=t(214),c=t(215),o=t(3);const l=e=>{let{form:n,isFieldsChanged:t,setFieldsChanged:r,footer:a,loading:c=!1,children:l,...d}=e;const[j]=s.a.useForm(),b=n||j;return Object(o.jsxs)(s.a,{form:b,...d,children:[l,t&&(a||Object(o.jsx)(i.a,{loading:c,onCancel:()=>{null===b||void 0===b||b.resetFields(),r&&r(!1)}}))]})};l.Title=r.a,l.Item=a.a,l.List=c.a,l.useForm=s.a.useForm,l.Provider=s.a.Provider},413:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));t(0);var s=t(382),i=t(383),r=t(54),a=t(376),c=t(3);const o=e=>{let{className:n,onCancel:t,loading:o,...l}=e;const{t:d}=Object(a.a)();return Object(c.jsxs)(s.a,{className:n,gutter:[10,10],wrap:!1,children:[Object(c.jsx)(i.a,{span:12,children:Object(c.jsx)(r.a,{block:!0,type:"ghost",onClick:t,...l,children:d("common.cancel")})}),Object(c.jsx)(i.a,{span:12,children:Object(c.jsx)(r.a,{block:!0,type:"primary",loading:o,htmlType:"submit",...l,children:d("common.save")})})]})}},419:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return i}));const s=new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/),i=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)?/gi},433:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));t(0);var s=t(376),i=t(209),r=t(406),a=t(3);const c=e=>{let{required:n,onClick:t,verified:c,...o}=e;const{t:l}=Object(s.a)();return Object(a.jsx)(r.a.Item,{name:"email",$isSuccess:c,$successText:l("profile.nav.personalInfo.verified"),label:l("common.email"),rules:[{required:n,message:l("common.requiredField")},{type:"email",message:l("common.notValidEmail")}],...o,children:Object(a.jsx)(i.a,{disabled:c,onClick:t})})}},439:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));t(0);var s,i=t(376),r=t(465),a=t(406),c=t(8),o=t(7),l=t(469),d=t(9);const j=Object(d.c)(l.a)(s||(s=Object(c.a)(["\n  height: 50px;\n  width: 100%;\n  padding: 8px 11px;\n  transition: all 0.3s;\n\n  color: var(--text-main-color);\n\n  border: 1px solid var(--border-color);\n\n  border-radius: ",";\n\n  &:hover {\n    border-color: #1d72b8;\n  }\n\n  &:focus {\n    outline: 0;\n    box-shadow: 0 0 0 2px rgb(0 89 171 / 20%);\n  }\n"])),o.b);var b=t(3);const u=e=>{let{required:n,onClick:t,verified:s}=e;const{t:c}=Object(i.a)();return Object(b.jsx)(a.a.Item,{name:"phone",$isSuccess:s,$successText:c("profile.nav.personalInfo.verified"),label:c("common.phone"),rules:[{required:n,message:c("common.requiredField")},()=>({validator:(e,n)=>!n||Object(r.a)(n)?Promise.resolve():Promise.reject(new Error(c("profile.nav.personalInfo.wrongNumber")))})],children:Object(b.jsx)(j,{disabled:s,className:"ant-input",onClick:t})})}},575:function(e,n,t){"use strict";t.r(n);var s=t(0),i=t(376),r=t(382),a=t(383),c=t(211),o=t(406),l=t(217),d=t(3);const j=()=>{const{t:e}=Object(i.a)();return Object(d.jsx)(o.a.Item,{name:"confirmPassword",label:e("profile.nav.securitySettings.confirmPassword"),dependencies:["newPassword"],rules:[{required:!0,message:e("profile.nav.securitySettings.requiredPassword")},n=>{let{getFieldValue:t}=n;return{validator:(n,s)=>s&&t("newPassword")!==s?Promise.reject(new Error(e("profile.nav.securitySettings.dontMatchPassword"))):Promise.resolve()}}],children:Object(d.jsx)(l.a,{})})},b=()=>{const{t:e}=Object(i.a)();return Object(d.jsx)(o.a.Item,{name:"password",label:e("profile.nav.securitySettings.currentPassword"),rules:[{required:!0,message:e("profile.nav.securitySettings.requiredPassword")}],children:Object(d.jsx)(l.a,{})})};var u=t(419);const m=()=>{const{t:e}=Object(i.a)();return Object(d.jsx)(o.a.Item,{name:"newPassword",label:e("profile.nav.securitySettings.newPassword"),dependencies:["password"],rules:[{required:!0,message:e("profile.nav.securitySettings.requiredPassword")},{pattern:u.a,message:e("profile.nav.securitySettings.notValidPassword")},n=>{let{getFieldValue:t}=n;return{validator:(n,s)=>s&&t("password")===s?Promise.reject(new Error(e("profile.nav.securitySettings.samePassword"))):Promise.resolve()}}],children:Object(d.jsx)(l.a,{})})};var O,v=t(60),h=t(8),x=t(54),p=t(7),f=t(9);const g=Object(f.c)(x.a)(O||(O=Object(h.a)(["\n  margin: 0.5rem 0 1.5rem 0;\n  width: 100%;\n\n  @media only screen and "," {\n    max-width: 10rem;\n  }\n\n  @media only screen and "," {\n    max-width: unset;\n  }\n"])),p.g.md,p.g.xl),w=()=>{const[e,n]=Object(s.useState)(!1),[t,c]=Object(s.useState)(!1),{t:l}=Object(i.a)();return Object(d.jsx)(o.a,{name:"newPassword",requiredMark:"optional",isFieldsChanged:e,onFieldsChange:()=>n(!0),footer:Object(d.jsx)(g,{loading:t,type:"primary",htmlType:"submit",children:l("common.confirm")}),onFinish:e=>{c(!0),setTimeout((()=>{c(!1),n(!1),v.a.success({message:l("common.success")}),console.log(e)}),1e3)},children:Object(d.jsxs)(r.a,{gutter:{md:15,xl:30},children:[Object(d.jsx)(a.a,{span:24,children:Object(d.jsx)(o.a.Item,{children:Object(d.jsx)(o.a.Title,{children:l("profile.nav.securitySettings.changePassword")})})}),Object(d.jsx)(a.a,{xs:24,md:12,xl:24,children:Object(d.jsx)(b,{})}),Object(d.jsx)(a.a,{xs:24,md:12,xl:24,children:Object(d.jsx)(m,{})}),Object(d.jsx)(a.a,{xs:24,md:12,xl:24,children:Object(d.jsx)(j,{})})]})})};var y,P,S=t(379);const F=Object(f.c)(S.a)(y||(y=Object(h.a)(["\n  .ant-radio-disabled + span {\n    color: var(--disabled-color);\n  }\n"]))),{Group:C}=(Object(f.c)(S.a.Button)(P||(P=Object(h.a)(["\n  &.ant-radio-button-wrapper-disabled {\n    color: var(--disabled-color);\n  }\n"]))),S.a);var k,q=t(433),A=t(439),E=t(34);const I=Object(f.c)((e=>Object(d.jsx)(F,{...e})))(k||(k=Object(h.a)(["\n  margin-right: 0;\n  width: 100%;\n  transition: all 0.5s ease;\n\n  ",";\n\n  & > span:last-of-type {\n    flex-grow: 1;\n  }\n"])),(e=>!e.$isActive&&"opacity: 0.5")),T=e=>{let{selectedOption:n,setSelectedOption:t}=e;const i=Object(E.b)((e=>e.user.user)),{isEmailActive:r,isPhoneActive:a}=Object(s.useMemo)((()=>({isPhoneActive:"phone"===n,isEmailActive:"email"===n})),[n]),c=Object(s.useCallback)((e=>()=>{t(e)}),[t]);return Object(s.useEffect)((()=>{null!==i&&void 0!==i&&i.email.verified&&null!==i&&void 0!==i&&i.phone.verified&&t(null)}),[t,null===i||void 0===i?void 0:i.email.verified,null===i||void 0===i?void 0:i.phone.verified]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(C,{value:n,onChange:e=>t(e.target.value),children:[Object(d.jsx)(I,{value:"phone",$isActive:a,disabled:null===i||void 0===i?void 0:i.phone.verified,children:Object(d.jsx)(A.a,{required:a,onClick:c("phone"),verified:null===i||void 0===i?void 0:i.phone.verified})}),Object(d.jsx)(I,{value:"email",$isActive:r,disabled:null===i||void 0===i?void 0:i.email.verified,children:Object(d.jsx)(q.a,{required:r,onClick:c("email"),verified:null===i||void 0===i?void 0:i.email.verified})})]})})};var $=t(394);const z=e=>{let{isEnabled:n,setEnabled:t}=e;const{t:s}=Object(i.a)();return Object(d.jsx)(o.a.Item,{children:Object(d.jsxs)(r.a,{gutter:[10,10],justify:"space-between",align:"middle",children:[Object(d.jsx)(a.a,{span:20,children:Object(d.jsx)(o.a.Title,{children:s("profile.nav.securitySettings.twoFactorAuth")})}),Object(d.jsx)(a.a,{span:4,children:Object(d.jsx)(r.a,{justify:"end",children:Object(d.jsx)(a.a,{children:Object(d.jsx)(o.a.Item,{name:"2fa",children:Object(d.jsx)($.a,{checked:n,onChange:t})})})})})]})})};var M,V=t(253),Z=t(140),B=t(212);const N=Object(f.c)(B.a)(M||(M=Object(h.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .ant-modal-body {\n    padding: 0;\n  }\n"]))),J=()=>{const e=Object(E.b)((e=>e.user.user)),n=Object(s.useMemo)((()=>(null===e||void 0===e?void 0:e.email.name)&&!(null!==e&&void 0!==e&&e.email.verified)||(null===e||void 0===e?void 0:e.phone.number)&&!(null!==e&&void 0!==e&&e.phone.verified)),[e]),[t,c]=Object(s.useState)(Boolean(n)),[l,j]=Object(s.useState)(!1),[b,u]=Object(s.useState)(Boolean((null===e||void 0===e?void 0:e.email.verified)||(null===e||void 0===e?void 0:e.phone.verified))),[m,O]=Object(s.useState)("email"),[h,p]=Object(s.useState)(!1),f=Object(E.a)(),{t:g}=Object(i.a)(),w=Object(s.useCallback)((()=>{if(e&&m){j(!1),c(!1),p(!1),v.a.success({message:g("common.success")});const n={...e,[m]:{...e[m],verified:!0}};f(Object(Z.b)(n))}}),[f,m,g,e]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(o.a,{name:"twoFactorAuth",requiredMark:"optional",isFieldsChanged:t,onFieldsChange:()=>c(!0),initialValues:{email:null===e||void 0===e?void 0:e.email.name,phone:null===e||void 0===e?void 0:e.phone.number},footer:b&&Object(d.jsx)(x.a,{type:"link",loading:l,htmlType:"submit",children:g("profile.nav.securitySettings.verify")})||Object(d.jsx)("span",{}),onFinish:()=>{p(!0)},children:Object(d.jsxs)(r.a,{children:[Object(d.jsx)(a.a,{span:24,children:Object(d.jsx)(z,{isEnabled:b,setEnabled:u})}),b&&Object(d.jsx)(a.a,{span:24,children:Object(d.jsx)(T,{selectedOption:m,setSelectedOption:O})})]})}),Object(d.jsx)(N,{destroyOnClose:!0,visible:h,footer:!1,closable:!1,onCancel:()=>p(!1),children:Object(d.jsx)(V.a,{onBack:()=>p(!1),onFinish:w})})]})},_=()=>Object(d.jsx)(c.a,{children:Object(d.jsxs)(r.a,{gutter:[30,0],children:[Object(d.jsx)(a.a,{xs:24,xl:10,children:Object(d.jsx)(w,{})}),Object(d.jsx)(a.a,{xs:24,xl:14,children:Object(d.jsx)(J,{})})]})});var G=t(79);n.default=()=>{const{t:e}=Object(i.a)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G.a,{children:e("profile.nav.securitySettings.title")}),Object(d.jsx)(_,{})]})}}}]);
//# sourceMappingURL=21.3ed14974.chunk.js.map